(setq inhibit-splash-screen t)

;; hide the tool bar but show the menu bar
(tool-bar-mode 0)
(menu-bar-mode 0)

;; allow us to use the X-Windows clipboard
(setq x-select-enable-clipboard t)	; as above
(setq interprogram-paste-function 'x-cut-buffer-or-selection-value)

;; don't wait for font change; works around a Gnome bug (see https://launchpad.net/metacity/+bug/23005)
(set-default-font "-misc-fixed-medium-r-normal--14-110-100-100-c-70-iso8859-1")
(modify-frame-parameters nil '((wait-for-wm . nil)))

;; nice font
(custom-set-faces
 '(default ((t (:background "white" :foreground "black")))))

;; paths containing additional .el files
(add-to-list 'load-path "~/.emacs.d")
(add-to-list 'load-path "~/.emacs.d/multiterm")
(add-to-list 'load-path "~/.emacs.d/ruby-mode")
(add-to-list 'load-path "~/.emacs.d/psvn")
(add-to-list 'load-path "~/.emacs.d/ccrypt")
(add-to-list 'load-path "~/.emacs.d/yaml-mode")
(add-to-list 'load-path "~/.emacs.d/vbnet-mode")
(add-to-list 'load-path "~/.emacs.d/duncans_emacs")
(add-to-list 'load-path "~/.emacs.d/cucumber.el")
(add-to-list 'load-path "~/.emacs.d/php-mode")
(add-to-list 'load-path "~/.emacs.d/inform-mode")
(add-to-list 'load-path "~/.emacs.d/haml-mode")
(add-to-list 'load-path "~/.emacs.d/sass-mode")
(add-to-list 'load-path "~/.emacs.d/slime")
(add-to-list 'load-path "~/.emacs.d/coffee-mode")
(add-to-list 'load-path "~/.emacs.d/undo-tree")

;; Emacs itself
(setq auto-mode-alist (cons '("emacs$" . lisp-mode) auto-mode-alist))

;; Ruby
(global-font-lock-mode 1)
(autoload 'ruby-mode "ruby-mode" "Ruby editing mode." t)
(setq auto-mode-alist (cons '("\\.rb$" . ruby-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("\\.rsel$" . ruby-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("\\.rhtml$" . html-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("\\.erb$" . html-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("\\.prawn$" . html-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("Rakefile$" . ruby-mode) auto-mode-alist))

;; HAML
(require 'haml-mode)
(setq auto-mode-alist (cons '("\\.haml$" . haml-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("\\.hamljs$" . haml-mode) auto-mode-alist))

;; Coffeescript
(require 'coffee-mode)
(setq auto-mode-alist (cons '("\\.coffee$" . coffee-mode) auto-mode-alist))

;; SASS
(require 'sass-mode)
(setq auto-mode-alist (cons '("\\.sass$" . sass-mode) auto-mode-alist))

;; feature-mode (Cucumber)
(require 'feature-mode)
(autoload 'feature-mode "feature-mode" "Cucumber feature editing mode." t)
(setq auto-mode-alist (cons '("\\.feature$" . feature-mode) auto-mode-alist))

;; modern Emacs behaviour; see http://xahlee.org/emacs/emacs_make_modern.html
(cua-mode)
(transient-mark-mode 1)
(delete-selection-mode 1)
(global-linum-mode 1)
(column-number-mode 1)

;; highlight current line
(global-hl-line-mode 1)

;; prevent emacs from making backup files
(setq make-backup-files nil)

;; allow automagic editing of ccrypt-ed files
(require 'jka-compr-ccrypt "jka-compr-ccrypt.el")

;; tab-with-spaces
(setq indent-tabs-mode nil)
(setq standard-indent 2)

;; dont save a semantic.cache file in every dir (courtesy http://shreevatsa.wordpress.com/)
(setq semanticdb-default-save-directory "~/.emacs.d/semantic_cache")

;; launch some shells unless we're in Windows
(if (and 
     (not (equal system-type 'windows-nt)))
    (progn
      (setq multi-term-program "/bin/bash")
      (require 'multi-term)
      (mapcar 
        (lambda (desired-name)
          (multi-term)
          (set-buffer "*terminal<1>*")
	  (rename-buffer desired-name))
	'("*tests*" "*server*" "*guard*" "*misc*"))))

;; YAML mode
;; http://www.emacswiki.org/emacs/YamlMode
(require 'yaml-mode)
(add-to-list 'auto-mode-alist '("\\.yml$" . yaml-mode))
(add-hook 'yaml-mode-hook '(lambda () (define-key yaml-mode-map "\C-m" 'newline-and-indent))) 

;; VB.NET mode, may be a bit dodgy but better than going blind staring at plain-white VB.NET
;; http://www.emacswiki.org/cgi-bin/wiki/download/vbnet-mode.el
(autoload 'vbnet-mode "vbnet-mode" "Visual Basic mode." t)
(setq auto-mode-alist (append '(("\\.\\(frm\\|bas\\|vb\\|cls\\)$" . vbnet-mode)) auto-mode-alist))

;; show full path in title bar
;; thanks to: http://www.arminsadeghi.com/slickedit_and_emacs
(setq-default frame-title-format
	      (list '((buffer-file-name " %f"
					(dired-directory
					 dired-directory
					 (revert-buffer-function " %b"
								 ("%b - Dir:  " default-directory))))))) 

;; PHP support
(require 'php-mode)

;; SLIME
(require 'slime)
(add-hook 'lisp-mode-hook (lambda () (slime-mode t)))
(add-hook 'inferior-lisp-mode-hook (lambda () (inferior-slime-mode t)))
(setq inferior-lisp-program "sbcl") 

;; Inform support
(autoload 'inform-mode "inform-mode" "Inform editing mode." t)
(autoload 'inform-maybe-mode "inform-mode" "Inform/C header editing mode.")
(setq auto-mode-alist
      (append '(("\\.h\\'"   . inform-maybe-mode)
                ("\\.inf\\'" . inform-mode))
              auto-mode-alist))

;; Objective-C mode for .j files 
(add-to-list 'auto-mode-alist '("\\.j$" . objc-mode))

;; some Steve Yegge wisdom; see http://sites.google.com/site/steveyegge2/effective-emacs
(global-set-key "\C-w" 'backward-kill-word)
(global-set-key "\C-x\C-k" 'kill-region)
(global-set-key "\C-c\C-k" 'kill-region)

;; undo-tree
(require 'undo-tree)
(global-undo-tree-mode)

;; my own extensions
(require 'duncans_emacs)
